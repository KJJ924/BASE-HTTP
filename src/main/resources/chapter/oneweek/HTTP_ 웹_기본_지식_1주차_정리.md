<img src="https://cdn.inflearn.com/public/files/courses/326277/4df75704-dd5d-403f-be3c-6860251d4326/326277-kor-b.jpg" alt="1" style="zoom: 50%;" />

[모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-웹-네트워크/dashboard) 을 듣고 정리한 내용이며 **모든 그림 예제는 해당 강의에서 가져온 내용입니다**.

# 인터넷 네트워크

## 항목

- 인터넷 통신
- IP(인터넷 프로토콜)
- TCP
- UDP
- PORT
- DNS

------------



## 인터넷 통신

클라이언트와 서버는 어떻게 통신할까?

| ![image-20210405211834875](https://tva1.sinaimg.cn/large/008eGmZEgy1gp956fi9c8j31hc0u0gwn.jpg) | ![image-20210405211845307](https://tva1.sinaimg.cn/large/008eGmZEgy1gp956q7n6pj31hc0u0wpb.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |

만약 클라이언트와 서버가 가까이 붙어있다면  다음과 같이 선을 연결하여 통신하면 될 것이다.

<img src="https://tva1.sinaimg.cn/large/008eGmZEgy1gp959m13sdj31hc0u0ake.jpg" alt="image-20210405213309627" style="zoom: 33%;" />

하지만 대부분 99.9% 는 서버와 클라이언트는 붙어있지않고 우리는 <u>인터넷 망을 이용하여 서버와 통신</u>을 하게된다.

인터넷 망은 매우 복잡하기 때문에 우리의 요청이 안전하게 서버까지 도달하기 위해서는 <u>복잡한 과정</u>을 거쳐야 한다.

따라서 이번 챕터에서는 위에서 말한 복잡한 과정에대해 자세히 알아보자.



----------------

## IP(인터넷 프로토콜)

먼저 인터넷 프로토콜에 대해서 알아보기 전에 이해하기 쉽게 예를 들어보자.

현실 세계에서 멀리 떨어진 친구와 편지를 통해 서로 소통을 한다고 했을때

필요한것이 무엇이 있을까?

1. 수신자의 주소
2. 송신자의 주소
3. 내용

다른 것도 필요하겠지만 필수적인 내용은 다음 항목과 같을 것이다.



인터넷 망도 현실 세계와 비슷하다. 

서버와 클라이언트는 멀리 떨어져 있기 때문에 클라이언트가 특정한 서버로 요청을 보내기 위해선

서버의 IP 주소를 알아야하고 응답 결과를 반환 하기위해선 클라이언트의 IP 주소를 알고 있어야한다. 



그러면 현실세계에서는 편지로 데이터를 주고 받지만 인터넷 망에서는 PacKet(패킷) 이라는 통신 단위로 데이터를 주고 받는다.

앞서 말한 편지의 데이터 단위에는 송신자 주소, 수신자 주소, 내용 등이 필요하다 했는데

패킷 역시 비슷한 내용을 담고 있다.

<img src="https://tva1.sinaimg.cn/large/008eGmZEgy1gp95qzeok2j31hc0u0dp9.jpg" alt="image-20210405214954335" style="zoom:33%;" />



위의 내용을 종합하여 예시를 그려보자면 다음과 같을 것이다.

| ![image-20210405215333743](https://tva1.sinaimg.cn/large/008eGmZEgy1gp95uso6doj31hc0u0gza.jpg) | ![image-20210405215436173](https://tva1.sinaimg.cn/large/008eGmZEgy1gp95vvt97aj31hc0u0tm2.jpg) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
|                                                              |                                                              |



그렇다면 인터넷 프로토콜 만 이용하면 안전하게 클라이언트와 서버간의 통신이 원활하게 돌아갈까?



## IP(인터넷 프로토콜) 의 한계



인터넷 프로토콜은 다음과 같은 한계를 가지고 있다. 

1. 비연결성
2. 비신뢰성
3. 프로그램 구분



### 비연결성

- 비연결성은 클라이언트가 IP 주소를 잘못 적거나(대상이없음), 대상이 있어도 서비스가 요청을 받지 못하는 상황이여도 클라이언트는 알 수 가 없다.

### 비신뢰성

- 패킷이 여러 노드를 거치면서 패킷이 소멸되는 경우

  -> 즉 패킷이 도착해도 해당 패킷이 전부 전달 되었는지 신뢰하지 못함

- 클라이언트가 보낸 패킷이 순서와 서버가 받는 패킷의 순서가 다른 경우

  -> (2x3)-6 를 요청했으나 순서가 바뀌어 (6x2)-3 으로 도착하여도 해당 데이터가 잘못된 데이터인지 서버는 알 수 없다.  

### 프로그램 구분

- 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 두 개 이상인 경우

  -> 어떠한 애플리케이션을 작동해야하는지 구분하지 못함

---
## TCP(Transmission Control Protocol)

앞서 살펴본 IP 의 단점을 보완해주는 프로토콜 계층이다.

TCP 는 어떻게 IP 의 단점들을 해결 할 수 있을까?

TCP 에서는 <u>출발지 PORT,  목적지 PORT , 전송제어, 순서, 검증정보</u> 등을 패킷에 포함시킨다.

해당 정보들을 이용하여 아래에서 살펴볼 행동들을 지원 해준다.



TCP 의 특징으로는

- 연결지향 - TCP 3 way handshake(가상 연결)

  -> 앞서 살펴본 IP 의 비연결성의 단점을 보완해준다. 동작방법은 다음 그림과같다.

  <img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpccytx9wgj31hc0u0wx8.jpg" alt="image-20210408161554308" style="zoom:33%;" />

  해당 방식은 물리적으로 연결된 것이 아니라 개념적으로만 연결된 것이다.



- 데이터 전달보증

  -> IP 의 비신뢰성을 보완해준다. 해당 방식은 클라이언트가 서버에게 데이터를 전송했다면

  서버에서는 데이터를 받았다고 응답결과를 return 해준다.

  <img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpcd5zr3glj31hc0u0k3f.jpg" alt="image-20210408162248466" style="zoom:33%;" />



- 순서 보장

  -> 해당 방식도 IP 의 비신뢰성 중 패킷의 도착순서가 뒤바뀐 경우 문제를 보완 해준다.

  만약 서버에 도착한 패킷들의 순서가 올바르지 않다면 서버는 다시 클라이언트에 재요청을 한다.

  <img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpcd6fvzfoj31hc0u0gy7.jpg" alt="image-20210408162333101" style="zoom:33%;" />



-------

## UDP(User Datagram Protocol)

UDP 는 TCP 와 다르게 기능이 많지않다.

앞서 TCP 는 많은 정보들을 패킷에 추가하여 각각의 기능들을 수행하게된다.

하지만 UDP 같은경우 PORT 와 체크섬 정도만 추가한다.

따라서 UDP 는 연결지향, 순서보장,데이터 전달보증 등을 지원해주지 않는다.

UDP 방식은 TCP 보다 하는일이 별로없기에 단순하고 빠르다.

그럼 왜 사용하는가?

-> TCP 는 너무 많은 정보를 가지고 있음으로 느리다. 또한 TCP 는 마음대로 커스텀하기도 힘들다.

하지만 UDP 같은 경우 거의 빈 껍데기이기 때문에 얼마든지 원하는대로 최적화를 할 수 있다.

-------------

## PORT

앞서 TCP,UDP 에서 포함시키는 정보중 공통적으로 포함하는 정보가 있다.

바로 PORT 정보인데 해당 정보는 왜 사용할까?

우리는 컴퓨터로 단 하나의 작업만을 하지 않는다.

우리는 컴퓨터를 이용하여 코딩도하고 노래도 듣고 게임도 즐긴다.

나의 컴퓨터의 IP는 단 하나이며 만약 포트정보가 없다면 컴퓨터는 응답을 주고 받을때

이 응답이 노래를듣기위한 것인지? 게임을 하기위한 응답인지 알 수 없다.

<img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpcdu26jerj31hc0u0k6x.jpg" alt="image-20210408164620353" style="zoom:33%;" />

---------

## DNS(Domain Name System)

우리는 네이버나 구글을 들어갈때 IP 주소를 쳐서 들어가지 않는다.

즉 https://192.2020.20200/ 처럼 접속하지 않는다는 뜻이다.

주소창에 naver.com 만 입력해도 네이버에 접속할수 있다.

해당 서비스가 DNS 인데 말그대로 도메인 명을 IP 주소로 변환하는 것이다.

해당 서비스를 이용하면 사용자들은 도메인명만 알고있다면 naver 의 실제 IP 주소가 변경되어도

언제든지 접속이 가능하며 서버를 운영하는 입장에서도 IP가 변경되어도 부담이 없어지게된다.

<img src="https://tva1.sinaimg.cn/large/008eGmZEly1gpce534gg7j31hc0u0k6q.jpg" alt="image-20210408165656955" style="zoom:33%;" />